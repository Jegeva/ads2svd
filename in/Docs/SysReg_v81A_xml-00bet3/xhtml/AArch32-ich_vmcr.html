<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>ICH_VMCR</title>
    <link href="insn.css" rel="stylesheet" type="text/css" />
  </head>
  <body><table align="center"><tr><td><div class="topbar"><a href="AArch32-regindex.html">AArch32 Registers</a></div></td><td><div class="topbar"><a href="AArch64-regindex.html">AArch64 Registers</a></div></td><td><div class="topbar"><a href="AArch32-sysindex.html">AArch32 Instructions</a></div></td><td><div class="topbar"><a href="AArch64-sysindex.html">AArch64 Instructions</a></div></td><td><div class="topbar"><a href="enc_index.html">Index by Encoding</a></div></td><td><div class="topbar"><a href="ext_alpha_index.html">External Registers</a></div></td><td><div class="topbar"><a href="ext_enc_index.html">External Registers by Offset</a></div></td><td><div class="topbar"><a href="func_index.html">Registers by Functional Group</a></div></td></tr></table><hr /><h1 class="register-section">ICH_VMCR, Interrupt Controller Virtual Machine Control Register</h1><p>The ICH_VMCR characteristics are:</p><h2>Purpose</h2>
          <p>Enables the hypervisor to save and restore the virtual machine view of the GIC state.</p>
        <p>This 
        register
       is part of:</p><ul><li>The GIC system registers functional group.</li><li>The Virtualization registers functional group.</li><li>The GIC host interface control registers functional group.</li></ul><h2>Configuration</h2><p>AArch32 System register ICH_VMCR
                is architecturally mapped to
              AArch64 System register <a href="AArch64-ich_vmcr_el2.html">ICH_VMCR_EL2</a>.
          </p>
          <p>If EL2 is not implemented, this register is <span class="arm-defined-word">RES0</span> from EL3.</p>
        <h2>Attributes</h2>
          <p>ICH_VMCR is a 32-bit register.</p>
        <h2>Field descriptions</h2><p>The ICH_VMCR bit assignments are:</p><table class="regdiagram"><thead><tr><td>31</td><td>30</td><td>29</td><td>28</td><td>27</td><td>26</td><td>25</td><td>24</td><td>23</td><td>22</td><td>21</td><td>20</td><td>19</td><td>18</td><td>17</td><td>16</td><td>15</td><td>14</td><td>13</td><td>12</td><td>11</td><td>10</td><td>9</td><td>8</td><td>7</td><td>6</td><td>5</td><td>4</td><td>3</td><td>2</td><td>1</td><td>0</td></tr></thead><tbody><tr class="firstrow"><td class="lr" colspan="8"><a href="#VPMR">VPMR</a></td><td class="lr" colspan="3"><a href="#VBPR0">VBPR0</a></td><td class="lr" colspan="3"><a href="#VBPR1">VBPR1</a></td><td class="l">0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td class="r">0</td><td class="lr" colspan="1"><a href="#VEOIM">VEOIM</a></td><td class="l">0</td><td>0</td><td>0</td><td class="r">0</td><td class="lr" colspan="1"><a href="#VCBPR">VCBPR</a></td><td class="lr" colspan="1"><a href="#VFIQEn">VFIQEn</a></td><td class="lr" colspan="1"><a href="#VAckCtl">VAckCtl</a></td><td class="lr" colspan="1"><a href="#VENG1">VENG1</a></td><td class="lr" colspan="1"><a href="#VENG0">VENG0</a></td></tr></tbody></table><h4 id="VPMR">VPMR, bits [31:24]
                  </h4>
              <p>Virtual Priority Mask. The priority mask level for the virtual CPU interface. If the priority of a pending virtual interrupt is higher than the value indicated by this field, the interface signals the virtual interrupt to the PE.</p>
            
              <p>This field is an alias of <a href="AArch32-icv_pmr.html">ICV_PMR</a>.Priority.</p>
            <h4 id="VBPR0">VBPR0, bits [23:21]
                  </h4>
              <p>Virtual Binary Point Register, Group 0. Defines the point at which the priority value fields split into two parts, the group priority field and the subpriority field. The group priority field determines Group 0 interrupt preemption, and also determines Group 1 interrupt preemption if ICH_VMCR.VCBPR == 1.</p>
            
              <p>This field is an alias of <a href="AArch32-icv_bpr0.html">ICV_BPR0</a>.BinaryPoint.</p>
            <h4 id="VBPR1">VBPR1, bits [20:18]
                  </h4>
              <p>Virtual Binary Point Register, Group 1. Defines the point at which the priority value fields split into two parts, the group priority field and the subpriority field. The group priority field determines Group 1 interrupt preemption if <a href="AArch32-ich_vmcr.html">ICH_VMCR</a>.VCBPR == 0.</p>
            
              <p>This field is an alias of <a href="AArch32-icv_bpr1.html">ICV_BPR1</a>.BinaryPoint.</p>
            <h4 id="0">
                Bits [17:10]
              </h4>
              <p>Reserved, <span class="arm-defined-word">RES0</span>.</p>
            <h4 id="VEOIM">VEOIM, bit [9]
              </h4>
              <p>Virtual EOI mode. Controls whether a write to an End of Interrupt register also deactivates the virtual interrupt:</p>
            <table class="valuetable"><tr><th>VEOIM</th><th>Meaning</th></tr><tr><td class="bitfield">0</td><td>
                  <p><a href="AArch32-icv_eoir0.html">ICV_EOIR0</a> and <a href="AArch32-icv_eoir1.html">ICV_EOIR1</a> provide both priority drop and interrupt deactivation functionality. Accesses to <a href="AArch32-icv_dir.html">ICV_DIR</a> are <span class="arm-defined-word">UNPREDICTABLE</span>.</p>
                </td></tr><tr><td class="bitfield">1</td><td>
                  <p><a href="AArch32-icv_eoir0.html">ICV_EOIR0</a> and <a href="AArch32-icv_eoir1.html">ICV_EOIR1</a> provide priority drop functionality only. <a href="AArch32-icv_dir.html">ICV_DIR</a> provides interrupt deactivation functionality.</p>
                </td></tr></table>
              <p>This bit is an alias of <a href="AArch32-icv_ctlr.html">ICV_CTLR</a>.EOImode.</p>
            <h4 id="0">
                Bits [8:5]
              </h4>
              <p>Reserved, <span class="arm-defined-word">RES0</span>.</p>
            <h4 id="VCBPR">VCBPR, bit [4]
              </h4>
              <p>Virtual Common Binary Point Register. Possible values of this bit are:</p>
            <table class="valuetable"><tr><th>VCBPR</th><th>Meaning</th></tr><tr><td class="bitfield">0</td><td>
                  <p><a href="AArch32-icv_bpr0.html">ICV_BPR0</a> determines the preemption group for virtual Group 0 interrupts only.</p>
                
                  <p><a href="AArch32-icv_bpr1.html">ICV_BPR1</a> determines the preemption group for virtual Group 1 interrupts.</p>
                </td></tr><tr><td class="bitfield">1</td><td>
                  <p><a href="AArch32-icv_bpr0.html">ICV_BPR0</a> determines the preemption group for both virtual Group 0 and virtual Group 1 interrupts.</p>
                
                  <p>Reads of <a href="AArch32-icv_bpr1.html">ICV_BPR1</a> return <a href="AArch32-icv_bpr0.html">ICV_BPR0</a> plus one, saturated to <span class="binarynumber">0b111</span>. Writes to <a href="AArch32-icv_bpr1.html">ICV_BPR1</a> are ignored.</p>
                </td></tr></table>
              <p>This field is an alias of <a href="AArch32-icv_ctlr.html">ICV_CTLR</a>.CBPR.</p>
            <h4 id="VFIQEn">VFIQEn, bit [3]
              </h4>
              <p>Virtual FIQ enable. Possible values of this bit are:</p>
            <table class="valuetable"><tr><th>VFIQEn</th><th>Meaning</th></tr><tr><td class="bitfield">0</td><td>
                  <p>Group 0 virtual interrupts are presented as virtual IRQs.</p>
                </td></tr><tr><td class="bitfield">1</td><td>
                  <p>Group 0 virtual interrupts are presented as virtual FIQs.</p>
                </td></tr></table>
              <p>This bit is an alias of <a href="ext-gicv_ctlr.html">GICV_CTLR</a>.FIQEn.</p>
            
              <p>In implementations where the Non-secure copy of <a href="AArch32-icc_sre.html">ICC_SRE</a>.SRE is always 1, this bit is <span class="arm-defined-word">RES1</span>.</p>
            <h4 id="VAckCtl">VAckCtl, bit [2]
              </h4>
              <p>Virtual AckCtl. Possible values of this bit are:</p>
            <table class="valuetable"><tr><th>VAckCtl</th><th>Meaning</th></tr><tr><td class="bitfield">0</td><td>
                  <p>If the highest priority pending interrupt is Group 1, a read of <a href="ext-gicv_iar.html">GICV_IAR</a> or <a href="ext-gicv_hppir.html">GICV_HPPIR</a> returns an INTID of 1022.</p>
                </td></tr><tr><td class="bitfield">1</td><td>
                  <p>If the highest priority pending interrupt is Group 1, a read of <a href="ext-gicv_iar.html">GICV_IAR</a> or <a href="ext-gicv_hppir.html">GICV_HPPIR</a> returns the INTID of the corresponding interrupt.</p>
                </td></tr></table>
              <p>This bit is an alias of <a href="ext-gicv_ctlr.html">GICV_CTLR</a>.AckCtl.</p>
            
              <p>This field is supported for backwards compatibility with GICv2. ARM deprecates the use of this field.</p>
            
              <p>In implementations where the Non-secure copy of <a href="AArch32-icc_sre.html">ICC_SRE</a>.SRE is always 1, this bit is <span class="arm-defined-word">RES0</span>.</p>
            <h4 id="VENG1">VENG1, bit [1]
              </h4>
              <p>Virtual Group 1 interrupt enable. Possible values of this bit are:</p>
            <table class="valuetable"><tr><th>VENG1</th><th>Meaning</th></tr><tr><td class="bitfield">0</td><td>
                  <p>Virtual Group 1 interrupts are disabled.</p>
                </td></tr><tr><td class="bitfield">1</td><td>
                  <p>Virtual Group 1 interrupts are enabled.</p>
                </td></tr></table>
              <p>This bit is an alias of <a href="AArch32-icv_igrpen1.html">ICV_IGRPEN1</a>.Enable.</p>
            <h4 id="VENG0">VENG0, bit [0]
              </h4>
              <p>Virtual Group 0 interrupt enable. Possible values of this bit are:</p>
            <table class="valuetable"><tr><th>VENG0</th><th>Meaning</th></tr><tr><td class="bitfield">0</td><td>
                  <p>Virtual Group 0 interrupts are disabled.</p>
                </td></tr><tr><td class="bitfield">1</td><td>
                  <p>Virtual Group 0 interrupts are enabled.</p>
                </td></tr></table>
              <p>This bit is an alias of <a href="AArch32-icv_igrpen0.html">ICV_IGRPEN0</a>.Enable.</p>
            <div class="access_mechanisms"><h2>Accessing the ICH_VMCR</h2><div class="access_instructions"><div class="access_instruction"><p>This register can be read using MRC with the following syntax:</p><p class="asm-code">MRC  &lt;syntax&gt;</p></div><div class="access_instruction"><p>This register can be written using MCR with the following syntax:</p><p class="asm-code">MCR  &lt;syntax&gt;</p></div><p>This syntax uses the following encoding in the System instruction encoding space:</p><table class="access_instructions"><tr><th rowspan="1">
        &lt;syntax&gt;
      </th><th>opc1</th><th>opc2</th><th>CRn</th><th>coproc</th><th>CRm</th></tr><tr><td>p15, 4, 
                &lt;Rt&gt;, c12, c11, 7</td><td>100</td><td>111</td><td>1100</td><td>1111</td><td>1011</td></tr></table><ul></ul></div><h3>Accessibility</h3><p>The register is accessible as follows:</p><table class="accessibility"><tr><th class="accessibility_control" colspan="2">
            Control
          </th><th colspan="4">
          Accessibility
        </th></tr><tr><th class="accessibility_control">TGE</th><th class="accessibility_control">NS</th><th>EL0</th><th>EL1</th><th>EL2</th><th>EL3</th></tr><tr><td class="accessibility_control">x</td><td class="accessibility_control">0</td><td>
        -
      </td><td>
        -
      </td><td>
        n/a
      </td><td>
        -
      </td></tr><tr><td class="accessibility_control">0</td><td class="accessibility_control">1</td><td>
        -
      </td><td>
        -
      </td><td>RW</td><td>RW</td></tr><tr><td class="accessibility_control">1</td><td class="accessibility_control">1</td><td>
        -
      </td><td>
        n/a
      </td><td>RW</td><td>RW</td></tr></table><p><p>This table applies to all instructions that can access this register.</p></p>
            <p>When EL2 is using System register access, EL1 using either System register or memory-mapped access must be supported.</p>
          <h3>Traps and enables</h3><div class="traps_intro"><p>For a description of the prioritization of any generated exceptions, see section G1.11.2 (Exception priority order) in the <i>ARM<sup>®</sup> Architecture Reference Manual, ARMv8, for ARMv8-A architecture profile</i> for exceptions taken to AArch32 state, and section D1.13.2 (Synchronous exception prioritization) for exceptions taken to AArch64 state. Subject to the prioritization rules, the following traps and enables are applicable when 
            accessing this register.
          </p></div><p>
            In both Security states, and not dependent on other configuration bits:
          </p><ul><li><p>If <a href="AArch32-icc_hsre.html">ICC_HSRE</a>.SRE==0, accesses to this register from EL2 are <span class="arm-defined-word">UNDEFINED</span>.</p></li><li><p>If <a href="AArch32-icc_msre.html">ICC_MSRE</a>.SRE==0, Non-secure accesses to this register from EL3 are <span class="arm-defined-word">UNDEFINED</span>.</p></li></ul><p>
        When
        EL2 is implemented and is using AArch64
        and
        SCR_EL3.NS==1 &amp;&amp; .E2H==0
        :
      </p><ul><li><p>If <a href="AArch64-hstr_el2.html">HSTR_EL2</a>.T12==1, Non-secure accesses to this register from EL1 are trapped to EL2.</p></li></ul><p>
        When
        EL2 is implemented and is using AArch64
        and
        SCR_EL3.NS==1 &amp;&amp; .E2H==1 &amp;&amp; HCR_EL2.TGE==0
        :
      </p><ul><li><p>If <a href="AArch64-hstr_el2.html">HSTR_EL2</a>.T12==1, Non-secure accesses to this register from EL1 are trapped to EL2.</p></li></ul><p>
        When
        EL2 is implemented and is using AArch32
        and
        SCR_EL3.NS==1
        :
      </p><ul><li><p>If <a href="AArch32-hstr.html">HSTR</a>.T12==1, Non-secure accesses to this register from EL1 are trapped to Hyp mode.</p></li></ul></div><br /><br /><hr /><table align="center"><tr><td><div class="topbar"><a href="AArch32-regindex.html">AArch32 Registers</a></div></td><td><div class="topbar"><a href="AArch64-regindex.html">AArch64 Registers</a></div></td><td><div class="topbar"><a href="AArch32-sysindex.html">AArch32 Instructions</a></div></td><td><div class="topbar"><a href="AArch64-sysindex.html">AArch64 Instructions</a></div></td><td><div class="topbar"><a href="enc_index.html">Index by Encoding</a></div></td><td><div class="topbar"><a href="ext_alpha_index.html">External Registers</a></div></td><td><div class="topbar"><a href="ext_enc_index.html">External Registers by Offset</a></div></td><td><div class="topbar"><a href="func_index.html">Registers by Functional Group</a></div></td></tr></table><p class="versions">24/03/2017 16:41</p><p class="copyconf">Copyright © 2010-2017 ARM Limited or its affiliates. All rights reserved. This document is Confidential.</p></body>
</html>
