<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>HCPTR</title>
    <link href="insn.css" rel="stylesheet" type="text/css" />
  </head>
  <body><table align="center"><tr><td><div class="topbar"><a href="AArch32-regindex.html">AArch32 Registers</a></div></td><td><div class="topbar"><a href="AArch64-regindex.html">AArch64 Registers</a></div></td><td><div class="topbar"><a href="AArch32-sysindex.html">AArch32 Instructions</a></div></td><td><div class="topbar"><a href="AArch64-sysindex.html">AArch64 Instructions</a></div></td><td><div class="topbar"><a href="enc_index.html">Index by Encoding</a></div></td><td><div class="topbar"><a href="ext_alpha_index.html">External Registers</a></div></td><td><div class="topbar"><a href="ext_enc_index.html">External Registers by Offset</a></div></td><td><div class="topbar"><a href="func_index.html">Registers by Functional Group</a></div></td></tr></table><hr /><h1 class="register-section">HCPTR, Hyp Architectural Feature Trap Register</h1><p>The HCPTR characteristics are:</p><h2>Purpose</h2>
          <p>Controls:</p>
        
          <ul>
            <li>
              Trapping to Hyp mode of Non-secure access, at EL1 or EL0, to trace, and to Advanced SIMD and floating-point functionality.
            </li>
            <li>
              Hyp mode access to trace, and to Advanced SIMD and floating-point functionality.
            </li>
          </ul>
        
          <div class="note"><span class="note-header">Note</span>
            <p>Accesses to this functionality:</p>
            <ul>
              <li>
                From Non-secure modes other than Hyp mode are also affected by settings in the <a href="AArch32-cpacr.html">CPACR</a> and <a href="AArch32-nsacr.html">NSACR</a>.
              </li>
              <li>
                From Hyp mode are also affected by settings in the <a href="AArch32-nsacr.html">NSACR</a>.
              </li>
            </ul>
            <p>Exceptions generated by the <a href="AArch32-cpacr.html">CPACR</a> and <a href="AArch32-nsacr.html">NSACR</a> controls are higher priority than those generated by the HCPTR controls.</p>
          </div>
        <p>This 
        register
       is part of the Virtualization registers functional group.</p><h2>Configuration</h2><p>AArch32 System register HCPTR
                is architecturally mapped to
              AArch64 System register <a href="AArch64-cptr_el2.html">CPTR_EL2</a>.
          </p>
          <p>If EL2 is not implemented, this register is <span class="arm-defined-word">RES0</span> from EL3.</p>
        <p>
                Some or all RW fields of this register have defined reset values. 
                
        These apply
      
                only if the PE resets into EL2
                
                  with EL2 using AArch32,
                
                or into
                
                    EL3 with EL3 using AArch32.
                  
                Otherwise,
                
                RW fields in this register reset to architecturally <span class="arm-defined-word">UNKNOWN</span> values.
              </p><h2>Attributes</h2>
          <p>HCPTR is a 32-bit register.</p>
        <h2>Field descriptions</h2><p>The HCPTR bit assignments are:</p><table class="regdiagram"><thead><tr><td>31</td><td>30</td><td>29</td><td>28</td><td>27</td><td>26</td><td>25</td><td>24</td><td>23</td><td>22</td><td>21</td><td>20</td><td>19</td><td>18</td><td>17</td><td>16</td><td>15</td><td>14</td><td>13</td><td>12</td><td>11</td><td>10</td><td>9</td><td>8</td><td>7</td><td>6</td><td>5</td><td>4</td><td>3</td><td>2</td><td>1</td><td>0</td></tr></thead><tbody><tr class="firstrow"><td class="lr" colspan="1"><a href="#TCPAC">TCPAC</a></td><td class="l">0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td class="r">0</td><td class="lr" colspan="1"><a href="#TTA">TTA</a></td><td class="l">0</td><td>0</td><td>0</td><td class="r">0</td><td class="lr" colspan="1"><a href="#TASE">TASE</a></td><td class="lr">0</td><td class="l">1</td><td class="r">1</td><td class="lr" colspan="1"><a href="#TCP11">TCP11</a></td><td class="lr" colspan="1"><a href="#TCP10">TCP10</a></td><td class="l">1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td class="r">1</td></tr></tbody></table><h4 id="TCPAC">TCPAC, bit [31]
              </h4>
              <p>Traps Non-secure EL1 accesses to the <a href="AArch32-cpacr.html">CPACR</a> to Hyp mode.</p>
            <table class="valuetable"><tr><th>TCPAC</th><th>Meaning</th></tr><tr><td class="bitfield">0</td><td>
                  <p>This control does not cause any instructions to be trapped.</p>
                </td></tr><tr><td class="bitfield">1</td><td>
                  <p>Non-secure EL1 accesses to the <a href="AArch32-cpacr.html">CPACR</a> are trapped to Hyp mode.</p>
                </td></tr></table>
              <div class="note"><span class="note-header">Note</span>
                <p>The <a href="AArch32-cpacr.html">CPACR</a> is not accessible at EL0.</p>
              </div>
            <p>When this register has an architecturally-defined reset value, this field resets to <span class="binarynumber">0</span>.</p><h4 id="0">
                Bits [30:21]
              </h4>
              <p>Reserved, <span class="arm-defined-word">RES0</span>.</p>
            <h4 id="TTA">TTA, bit [20]
              </h4>
              <p>Traps Non-secure System register accesses to all implemented trace registers to Hyp mode.</p>
            <table class="valuetable"><tr><th>TTA</th><th>Meaning</th></tr><tr><td class="bitfield">0</td><td>
                  <p>This control does not cause any instructions to be trapped.</p>
                </td></tr><tr><td class="bitfield">1</td><td>
                  <p>Any Non-secure System register access to an implemented trace register is trapped to Hyp mode, unless the access is trapped to EL1 by a <a href="AArch32-cpacr.html">CPACR</a> or <a href="AArch32-nsacr.html">NSACR</a> control, or the access is from Non-secure EL0 and the definition of the register in the appropriate trace architecture specification indicates that the register is not accessible from EL0. A trapped instruction generates:</p>
                
                  <ul>
                    <li>
                      A Hyp Trap exception, if the exception is taken from Non-secure EL0 or EL1.
                    </li>
                    <li>
                      An Undefined Instruction exception taken to Hyp mode, if the exception is taken from Hyp mode.
                    </li>
                  </ul>
                </td></tr></table>
              <p>If the implementation does not include a trace macrocell, or does not include a System register interface to the trace macrocell registers, it is <span class="arm-defined-word">IMPLEMENTATION DEFINED</span> whether this bit:</p>
            
              <ul>
                <li>
                  Is <span class="arm-defined-word">RES0</span>.
                </li>
                <li>
                  Is <span class="arm-defined-word">RES1</span>.
                </li>
                <li>
                  Can be written from Hyp mode, and from Secure Monitor mode when <a href="AArch32-scr-s.html">SCR</a>.NS is 1.
                </li>
              </ul>
            
              <p>If EL3 is implemented and is using AArch32, and the value of <a href="AArch32-nsacr.html">NSACR</a>.NSTRCDIS is 1, in Non-secure state this field behaves as RAO/WI, regardless of its actual value.</p>
            
              <div class="note"><span class="note-header">Note</span>
                <ul>
                  <li>
                    The ETMv4 architecture does not permit EL0 to access the trace registers. If the implementation includes an ETMv4 implementation, EL0 accesses to the trace registers are <span class="arm-defined-word">UNDEFINED</span>, and a resulting Undefined Instruction exception is higher priority than a HCPTR.TTA Hyp Trap exception.
                  </li>
                  <li>
                    The architecture does not provide traps on trace register accesses through the optional memory-mapped external debug interface.
                  </li>
                </ul>
              </div>
            
              <p>System register accesses to the trace registers can have side-effects. When a System register access is trapped, any side-effects that are normally associated with the access do not occur before the exception is taken.</p>
            <p>When this register has an architecturally-defined reset value, if this field is implemented as an RW field, it resets to <span class="binarynumber">0</span>.</p><h4 id="0">
                Bits [19:16]
              </h4>
              <p>Reserved, <span class="arm-defined-word">RES0</span>.</p>
            <h4 id="TASE">TASE, bit [15]
              </h4>
              <p>Traps Non-secure execution of Advanced SIMD instructions to Hyp mode when the value of HCPTR.TCP10 is 0.</p>
            <table class="valuetable"><tr><th>TASE</th><th>Meaning</th></tr><tr><td class="bitfield">0</td><td>
                  <p>This control does not cause any instructions to be trapped.</p>
                </td></tr><tr><td class="bitfield">1</td><td>
                  <p>When the value of HCPTR.TCP10 is 0, any attempt to execute an Advanced SIMD instruction in Non-secure state is trapped to Hyp mode, unless it is trapped to EL1 by a <a href="AArch32-cpacr.html">CPACR</a> or <a href="AArch32-nsacr.html">NSACR</a> control. A trapped instruction generates:</p>
                
                  <ul>
                    <li>
                      A Hyp Trap exception, if the exception is taken from Non-secure EL0 or EL1.
                    </li>
                    <li>
                      An Undefined Instruction exception taken to Hyp mode, if the exception is taken from Hyp mode.
                    </li>
                  </ul>
                </td></tr></table>
              <p>When the value of HCPTR.TCP10 is 1, the value of this field is ignored.</p>
            
              <p>If the implementation does not include Advanced SIMD and floating-point functionality, this field is <span class="arm-defined-word">RES1</span>. Otherwise, it is <span class="arm-defined-word">IMPLEMENTATION DEFINED</span> whether this field is implemented as a RW field. If it is not implemented as a RW field, then it is RAZ/WI.</p>
            
              <p>If EL3 is implemented and is using AArch32, and the value of <a href="AArch32-nsacr.html">NSACR</a>.NSASEDIS is 1, in Non-secure state this field behaves as RAO/WI, regardless of its actual value. This applies even if the field is implemented as RAZ/WI.</p>
            
              <p>For the list of instructions affected by this field, see <span class="xref">'Controls of Advanced SIMD operation that do not apply to floating-point operation' in the ARMv8 ARM, section E1</span>.</p>
            <p>When this register has an architecturally-defined reset value, if this field is implemented as an RW field, it resets to <span class="binarynumber">0</span>.</p><h4 id="0">
                Bit [14]
              </h4>
              <p>Reserved, <span class="arm-defined-word">RES0</span>.</p>
            <h4 id="1">
                Bits [13:12]
              </h4>
              <p>Reserved, <span class="arm-defined-word">RES1</span>.</p>
            <h4 id="TCP11">TCP11, bit [11]
              </h4>
              <p>The value of this field is ignored. If this field is programmed with a different value to the TCP10 bit then this field is <span class="arm-defined-word">UNKNOWN</span> on a direct read of the HCPTR.</p>
            
              <p>If the implementation does not include Advanced SIMD and floating-point functionality, this field is <span class="arm-defined-word">RES1</span>.</p>
            
              <p>If EL3 is implemented and is using AArch32, and the value of <a href="AArch32-nsacr.html">NSACR</a>.cp10 is 0, in Non-secure state this field behaves as RAO/WI, regardless of its actual value.</p>
            <p>When this register has an architecturally-defined reset value, if this field is implemented as an RW field, it resets to <span class="binarynumber">0</span>.</p><h4 id="TCP10">TCP10, bit [10]
              </h4>
              <p>Trap Non-secure accesses to Advanced SIMD and floating-point functionality to Hyp mode:</p>
            <table class="valuetable"><tr><th>TCP10</th><th>Meaning</th></tr><tr><td class="bitfield">0</td><td>
                  <p>This control does not cause any instructions to be trapped.</p>
                </td></tr><tr><td class="bitfield">1</td><td>
                  <p>Any attempted access to Advanced SIMD and floating-point functionality from Non-secure state is trapped to Hyp mode, unless it is trapped to EL1 by a <a href="AArch32-cpacr.html">CPACR</a> or <a href="AArch32-nsacr.html">NSACR</a> control. A trapped instruction generates:</p>
                
                  <ul>
                    <li>
                      A Hyp Trap exception, if the exception is taken from Non-secure EL0 or EL1.
                    </li>
                    <li>
                      An Undefined Instruction exception taken to Hyp mode, if the exception is taken from Hyp mode.
                    </li>
                  </ul>
                </td></tr></table>
              <p>The Advanced SIMD and floating-point features controlled by these fields are:</p>
            
              <ul>
                <li>
                  Execution of any floating-point or Advanced SIMD instruction.
                </li>
                <li>
                  Any access to the Advanced SIMD and floating-point registers D0-D31 and their views as S0-S31 and Q0-Q15.
                </li>
                <li>
                  Any access to the <a href="AArch32-fpscr.html">FPSCR</a>, <a href="AArch32-fpsid.html">FPSID</a>, <a href="AArch32-mvfr0.html">MVFR0</a>, <a href="AArch32-mvfr1.html">MVFR1</a>, <a href="AArch32-mvfr2.html">MVFR2</a>, or <a href="AArch32-fpexc.html">FPEXC</a> System registers.
                </li>
              </ul>
            
              <p>If the implementation does not include Advanced SIMD and floating-point functionality, this field is <span class="arm-defined-word">RES1</span>.</p>
            
              <p>If EL3 is implemented and is using AArch32, and the value of <a href="AArch32-nsacr.html">NSACR</a>.cp10 is 0, in Non-secure state this field behaves as RAO/WI, regardless of its actual value.</p>
            <p>When this register has an architecturally-defined reset value, if this field is implemented as an RW field, it resets to <span class="binarynumber">0</span>.</p><h4 id="1">
                Bits [9:0]
              </h4>
              <p>Reserved, <span class="arm-defined-word">RES1</span>.</p>
            <div class="access_mechanisms"><h2>Accessing the HCPTR</h2><div class="access_instructions"><div class="access_instruction"><p>This register can be read using MRC with the following syntax:</p><p class="asm-code">MRC  &lt;syntax&gt;</p></div><div class="access_instruction"><p>This register can be written using MCR with the following syntax:</p><p class="asm-code">MCR  &lt;syntax&gt;</p></div><p>This syntax uses the following encoding in the System instruction encoding space:</p><table class="access_instructions"><tr><th rowspan="1">
        &lt;syntax&gt;
      </th><th>opc1</th><th>opc2</th><th>CRn</th><th>coproc</th><th>CRm</th></tr><tr><td>p15, 4, 
                &lt;Rt&gt;, c1, c1, 2</td><td>100</td><td>010</td><td>0001</td><td>1111</td><td>0001</td></tr></table><ul></ul></div><h3>Accessibility</h3><p>The register is accessible as follows:</p><table class="accessibility"><tr><th class="accessibility_control" colspan="3">
            Control
          </th><th colspan="4">
          Accessibility
        </th></tr><tr><th class="accessibility_control">E2H</th><th class="accessibility_control">TGE</th><th class="accessibility_control">NS</th><th>EL0</th><th>EL1</th><th>EL2</th><th>EL3</th></tr><tr><td class="accessibility_control">x</td><td class="accessibility_control">x</td><td class="accessibility_control">0</td><td>
        -
      </td><td>
        -
      </td><td>
        n/a
      </td><td>
        -
      </td></tr><tr><td class="accessibility_control">x</td><td class="accessibility_control">0</td><td class="accessibility_control">1</td><td>
        -
      </td><td>
        -
      </td><td>RW</td><td>RW</td></tr><tr><td class="accessibility_control">x</td><td class="accessibility_control">1</td><td class="accessibility_control">1</td><td>
        -
      </td><td>
        n/a
      </td><td>RW</td><td>RW</td></tr></table><p><p>This table applies to all instructions that can access this register.</p></p><h3>Traps and enables</h3><div class="traps_intro"><p>For a description of the prioritization of any generated exceptions, see section G1.11.2 (Exception priority order) in the <i>ARM<sup>®</sup> Architecture Reference Manual, ARMv8, for ARMv8-A architecture profile</i> for exceptions taken to AArch32 state, and section D1.13.2 (Synchronous exception prioritization) for exceptions taken to AArch64 state. Subject to the prioritization rules, the following traps and enables are applicable when 
            accessing this register.
          </p></div><p>
        When
        EL3 is implemented and is using AArch64
        :
      </p><ul><li><p>If <a href="AArch64-cptr_el3.html">CPTR_EL3</a>.TCPAC==1, accesses to this register from EL2 are trapped to EL3.</p></li></ul><p>
        When
        EL2 is implemented and is using AArch64
        and
        SCR_EL3.NS==1 &amp;&amp; HCR_EL2.E2H==0
        :
      </p><ul><li><p>If <a href="AArch64-hstr_el2.html">HSTR_EL2</a>.T1==1, Non-secure accesses to this register from EL1 are trapped to EL2.</p></li></ul><p>
        When
        EL2 is implemented and is using AArch64
        and
        SCR_EL3.NS==1 &amp;&amp; HCR_EL2.E2H==1 &amp;&amp; HCR_EL2.TGE==0
        :
      </p><ul><li><p>If <a href="AArch64-hstr_el2.html">HSTR_EL2</a>.T1==1, Non-secure accesses to this register from EL1 are trapped to EL2.</p></li></ul><p>
        When
        EL2 is implemented and is using AArch32
        and
        SCR_EL3.NS==1
        :
      </p><ul><li><p>If <a href="AArch32-hstr.html">HSTR</a>.T1==1, Non-secure accesses to this register from EL1 are trapped to Hyp mode.</p></li></ul></div><br /><br /><hr /><table align="center"><tr><td><div class="topbar"><a href="AArch32-regindex.html">AArch32 Registers</a></div></td><td><div class="topbar"><a href="AArch64-regindex.html">AArch64 Registers</a></div></td><td><div class="topbar"><a href="AArch32-sysindex.html">AArch32 Instructions</a></div></td><td><div class="topbar"><a href="AArch64-sysindex.html">AArch64 Instructions</a></div></td><td><div class="topbar"><a href="enc_index.html">Index by Encoding</a></div></td><td><div class="topbar"><a href="ext_alpha_index.html">External Registers</a></div></td><td><div class="topbar"><a href="ext_enc_index.html">External Registers by Offset</a></div></td><td><div class="topbar"><a href="func_index.html">Registers by Functional Group</a></div></td></tr></table><p class="versions">24/03/2017 16:41</p><p class="copyconf">Copyright © 2010-2017 ARM Limited or its affiliates. All rights reserved. This document is Confidential.</p></body>
</html>
